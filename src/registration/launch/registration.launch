<launch>

    <arg name="cloud_topic" default="/camera/ahat"/>
    <arg name="online" default="true"/>

    <!-- Live Processing -->
    <include if="$(arg online)" file="$(find ros_tcp_endpoint)/launch/endpoint.launch"/>

    <!-- For Processing Rosbag -->
    <param unless="$(arg online)" name="use_sim_time" value="true"/>

    <node pkg="registration" type="robot_registration" name="registration_node" output="screen">
        <rosparam command="load" file="$(find registration)/config/registration.yaml"/>
        <param name="pcd_dir" value="$(find registration)/pcd_files/"/>
        <remap from="cloud_in" to="$(arg cloud_topic)"/>
    </node> 

    <!-- <node pkg="registration" type="ahat_aggregate" name="ahat_aggregate_node" output="screen">
        <remap from="cloud_in" to="$(arg cloud_topic)"/>
        <remap from="cloud_out" to="/camera/ahat_aggregate"/>
    </node> -->

    <node pkg="rviz" type="rviz" name="rviz" args="-d $(find registration)/rviz/registration.rviz" required="true"/>

    <!-- Robot Render -->
    <include file="$(find abb_irb1200_support)/launch/real_robot_render.launch">
        <arg name="stream_joints" value="$(arg online)"/>
    </include>

    <node pkg="tf" type="static_transform_publisher" name="static_transform_publisher1" args="0 0 0 0 0 0 1 world base_link 100" />
    <!-- <node pkg="tf" type="static_transform_publisher" name="static_transform_publisher2" args="0 0 0 0 0 0 1 world unity 100" />
    <node pkg="tf" type="static_transform_publisher" name="static_transform_publisher3" args="0 0 1 0 0 0 1 unity align 100" /> -->

</launch>